<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
</head>
<body>

    <div id="app"></div>

    <script src="react.js" type="text/javascript" ></script>
    <script src="react-dom.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.24/browser.min.js"></script>

    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.11.1/react.js" type="text/javascript" ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.11.1/JSXTransformer.js" type="text/javascript"></script> -->

    

    <script type="text/babel">
        var MessageBox = React.createClass({

            handleAdd: function(e) {
                var newMessage = this.refs.newMessage.getDOMNode().value;

                var newMessages = this.state.messages.concat([newMessage]);

                console.log(newMessages);

                this.setState({
                    messages: newMessages
                });
            },

            getInitialState: function() {
                return {
                    isVisible: true,
                    messages: [
                        'Gica are mere',
                        'Ana are pere si mere',
                        'Bula nu are nimica'
                    ]
                }
            },

            render: function() {

                var inlineStyles = {
                    display: this.state.isVisible ? 'block': 'none'
                }

                var messages = this.state.messages.map(function(message){
                    return <SubMessage message={message} />
                })

                return (
                    <div className="container jumbotron" style={inlineStyles}>
                        <h2>Hello, World</h2>
                        <input ref="newMessage" type="text" />
                        <button className="btn btn-primary" onClick={this.handleAdd}>Add</button>
                        { messages }
                    </div>
                );
            } 
        });

        var SubMessage = React.createClass({

            propTypes: {
                message: React.PropTypes.string.isRequired
            },

            getDefaultProps: function() {
                return {
                    message: 'its good to see you'
                }
            },

            render: function() {
                return (
                    <span>{this.props.message}</span>
                );
            }
        });

        ReactDOM.render(
            <MessageBox />,
            document.getElementById('app'),
            function() {
                console.log('finished');
            }
        )
    </script>
</body>
</html>